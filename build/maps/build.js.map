{"version":3,"sources":["build.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","extend","b","Object","keys","forEach","key","prototype","toString","2","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","arko","options","this","selectors","classNames","active","container","docReady","find","bind","value","callback","completed","document","removeEventListener","window","readyState","setTimeout","addEventListener","embeds","selector","concat","slice","querySelectorAll","embed","isResponsive","pos","getBoundingClientRect","createElement","className","style","paddingBottom","height","width","parentNode","insertBefore","appendChild","classList","add","contains","exclude","object-extend"],"mappings":"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","file":"build.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/*!\n * object-extend\n * A well-tested function to deep extend (or merge) JavaScript objects without further dependencies.\n *\n * http://github.com/bernhardw\n *\n * Copyright 2013, Bernhard Wanger <mail@bernhardwanger.com>\n * Released under the MIT license.\n *\n * Date: 2013-04-10\n */\n\n\n/**\n * Extend object a with object b.\n *\n * @param {Object} a Source object.\n * @param {Object} b Object to extend with.\n * @returns {Object} a Extended object.\n */\nmodule.exports = function extend(a, b) {\n\n    // Don't touch 'null' or 'undefined' objects.\n    if (a == null || b == null) {\n        return a;\n    }\n\n    // TODO: Refactor to use for-loop for performance reasons.\n    Object.keys(b).forEach(function (key) {\n\n        // Detect object without array, date or null.\n        // TODO: Performance test:\n        // a) b.constructor === Object.prototype.constructor\n        // b) Object.prototype.toString.call(b) == '[object Object]'\n        if (Object.prototype.toString.call(b[key]) == '[object Object]') {\n            if (Object.prototype.toString.call(a[key]) != '[object Object]') {\n                a[key] = b[key];\n            } else {\n                a[key] = extend(a[key], b[key]);\n            }\n        } else {\n            a[key] = b[key];\n        }\n\n    });\n\n    return a;\n\n};\n},{}],2:[function(require,module,exports){\n'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar extend = require('object-extend');\n\nvar arko = function () {\n    function arko(options) {\n        _classCallCheck(this, arko);\n\n        this.options = extend({\n            selectors: ['embed', 'object', 'iframe'],\n            classNames: {\n                active: 'is-responsive',\n                container: 'embed-container'\n            }\n        }, options);\n\n        this.docReady(this.find.bind(this));\n    }\n\n    _createClass(arko, [{\n        key: 'docReady',\n        value: function docReady(callback) {\n            function completed() {\n                document.removeEventListener(\"DOMContentLoaded\", completed, false);\n                window.removeEventListener(\"load\", completed, false);\n                callback();\n            }\n\n            if (document.readyState === \"complete\") {\n                setTimeout(callback);\n            } else {\n                document.addEventListener(\"DOMContentLoaded\", completed, false);\n                window.addEventListener(\"load\", completed, false);\n            }\n        }\n    }, {\n        key: 'find',\n        value: function find() {\n            // Get embeds\n            var embeds = [];\n            this.options.selectors.forEach(function (selector) {\n                embeds = embeds.concat([].slice.call(document.querySelectorAll(selector)));\n            });\n\n            // Set aspect ratio\n            embeds.forEach(function (embed) {\n                if (this.isResponsive(embed)) return;\n\n                var pos = embed.getBoundingClientRect();\n\n                // Create container, append embed\n                var container = document.createElement('div');\n                container.className = this.options.classNames.container;\n                container.style.paddingBottom = 100 * pos.height / pos.width + '%';\n                embed.parentNode.insertBefore(container, embed);\n                container.appendChild(embed);\n\n                container.classList.add(this.options.classNames.active);\n            }.bind(this));\n        }\n    }, {\n        key: 'isResponsive',\n        value: function isResponsive(embed) {\n            return embed.parentNode.classList.contains(this.options.classNames.active) || this.exclude(embed);\n        }\n    }], [{\n        key: 'exclude',\n        value: function exclude(embed) {\n            return embed.classList.contains('instagram-media');\n        }\n    }]);\n\n    return arko;\n}();\n\nmodule.exports = exports = arko;\n\n},{\"object-extend\":1}]},{},[2])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvb2JqZWN0LWV4dGVuZC9saWIvZXh0ZW5kLmpzIiwic3JjL2Fya28uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7QUNoREEsSUFBSSxTQUFTLFFBQVEsZUFBUixDQUFiOztJQUVNLEk7QUFDRixrQkFBWSxPQUFaLEVBQXFCO0FBQUE7O0FBQ2pCLGFBQUssT0FBTCxHQUFlLE9BQU87QUFDbEIsdUJBQVcsQ0FDUCxPQURPLEVBRVAsUUFGTyxFQUdQLFFBSE8sQ0FETztBQU1sQix3QkFBWTtBQUNSLHdCQUFRLGVBREE7QUFFUiwyQkFBVztBQUZIO0FBTk0sU0FBUCxFQVVaLE9BVlksQ0FBZjs7QUFZQSxhQUFLLFFBQUwsQ0FBYyxLQUFLLElBQUwsQ0FBVSxJQUFWLENBQWUsSUFBZixDQUFkO0FBQ0g7Ozs7aUNBRVEsUSxFQUFVO0FBQ2YscUJBQVMsU0FBVCxHQUFxQjtBQUNqQix5QkFBUyxtQkFBVCxDQUE2QixrQkFBN0IsRUFBaUQsU0FBakQsRUFBNEQsS0FBNUQ7QUFDQSx1QkFBTyxtQkFBUCxDQUEyQixNQUEzQixFQUFtQyxTQUFuQyxFQUE4QyxLQUE5QztBQUNBO0FBQ0g7O0FBRUQsZ0JBQUksU0FBUyxVQUFULEtBQXdCLFVBQTVCLEVBQXdDO0FBQ3BDLDJCQUFXLFFBQVg7QUFDSCxhQUZELE1BRU87QUFDSCx5QkFBUyxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsU0FBOUMsRUFBeUQsS0FBekQ7QUFDQSx1QkFBTyxnQkFBUCxDQUF3QixNQUF4QixFQUFnQyxTQUFoQyxFQUEyQyxLQUEzQztBQUNIO0FBQ0o7OzsrQkFFTTs7QUFFSCxnQkFBSSxTQUFTLEVBQWI7QUFDQSxpQkFBSyxPQUFMLENBQWEsU0FBYixDQUF1QixPQUF2QixDQUErQixVQUFVLFFBQVYsRUFBb0I7QUFDL0MseUJBQVMsT0FBTyxNQUFQLENBQWMsR0FBRyxLQUFILENBQVMsSUFBVCxDQUFjLFNBQVMsZ0JBQVQsQ0FBMEIsUUFBMUIsQ0FBZCxDQUFkLENBQVQ7QUFDSCxhQUZEOzs7QUFLQSxtQkFBTyxPQUFQLENBQWUsVUFBVSxLQUFWLEVBQWlCO0FBQzVCLG9CQUFJLEtBQUssWUFBTCxDQUFrQixLQUFsQixDQUFKLEVBQThCOztBQUU5QixvQkFBSSxNQUFNLE1BQU0scUJBQU4sRUFBVjs7O0FBR0Esb0JBQUksWUFBWSxTQUFTLGFBQVQsQ0FBdUIsS0FBdkIsQ0FBaEI7QUFDQSwwQkFBVSxTQUFWLEdBQXNCLEtBQUssT0FBTCxDQUFhLFVBQWIsQ0FBd0IsU0FBOUM7QUFDQSwwQkFBVSxLQUFWLENBQWdCLGFBQWhCLEdBQWlDLE1BQU0sSUFBSSxNQUFWLEdBQW1CLElBQUksS0FBeEIsR0FBaUMsR0FBakU7QUFDQSxzQkFBTSxVQUFOLENBQWlCLFlBQWpCLENBQThCLFNBQTlCLEVBQXlDLEtBQXpDO0FBQ0EsMEJBQVUsV0FBVixDQUFzQixLQUF0Qjs7QUFFQSwwQkFBVSxTQUFWLENBQW9CLEdBQXBCLENBQXdCLEtBQUssT0FBTCxDQUFhLFVBQWIsQ0FBd0IsTUFBaEQ7QUFDSCxhQWJjLENBYWIsSUFiYSxDQWFSLElBYlEsQ0FBZjtBQWNIOzs7cUNBRVksSyxFQUFPO0FBQ2hCLG1CQUFPLE1BQU0sVUFBTixDQUFpQixTQUFqQixDQUEyQixRQUEzQixDQUFvQyxLQUFLLE9BQUwsQ0FBYSxVQUFiLENBQXdCLE1BQTVELEtBQXVFLEtBQUssT0FBTCxDQUFhLEtBQWIsQ0FBOUU7QUFDSDs7O2dDQUVjLEssRUFBTztBQUNsQixtQkFBTyxNQUFNLFNBQU4sQ0FBZ0IsUUFBaEIsQ0FBeUIsaUJBQXpCLENBQVA7QUFDSDs7Ozs7O0FBR0wsT0FBTyxPQUFQLEdBQWlCLFVBQVUsSUFBM0IiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiLyohXG4gKiBvYmplY3QtZXh0ZW5kXG4gKiBBIHdlbGwtdGVzdGVkIGZ1bmN0aW9uIHRvIGRlZXAgZXh0ZW5kIChvciBtZXJnZSkgSmF2YVNjcmlwdCBvYmplY3RzIHdpdGhvdXQgZnVydGhlciBkZXBlbmRlbmNpZXMuXG4gKlxuICogaHR0cDovL2dpdGh1Yi5jb20vYmVybmhhcmR3XG4gKlxuICogQ29weXJpZ2h0IDIwMTMsIEJlcm5oYXJkIFdhbmdlciA8bWFpbEBiZXJuaGFyZHdhbmdlci5jb20+XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG4gKlxuICogRGF0ZTogMjAxMy0wNC0xMFxuICovXG5cblxuLyoqXG4gKiBFeHRlbmQgb2JqZWN0IGEgd2l0aCBvYmplY3QgYi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYSBTb3VyY2Ugb2JqZWN0LlxuICogQHBhcmFtIHtPYmplY3R9IGIgT2JqZWN0IHRvIGV4dGVuZCB3aXRoLlxuICogQHJldHVybnMge09iamVjdH0gYSBFeHRlbmRlZCBvYmplY3QuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gZXh0ZW5kKGEsIGIpIHtcblxuICAgIC8vIERvbid0IHRvdWNoICdudWxsJyBvciAndW5kZWZpbmVkJyBvYmplY3RzLlxuICAgIGlmIChhID09IG51bGwgfHwgYiA9PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cblxuICAgIC8vIFRPRE86IFJlZmFjdG9yIHRvIHVzZSBmb3ItbG9vcCBmb3IgcGVyZm9ybWFuY2UgcmVhc29ucy5cbiAgICBPYmplY3Qua2V5cyhiKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcblxuICAgICAgICAvLyBEZXRlY3Qgb2JqZWN0IHdpdGhvdXQgYXJyYXksIGRhdGUgb3IgbnVsbC5cbiAgICAgICAgLy8gVE9ETzogUGVyZm9ybWFuY2UgdGVzdDpcbiAgICAgICAgLy8gYSkgYi5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0LnByb3RvdHlwZS5jb25zdHJ1Y3RvclxuICAgICAgICAvLyBiKSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYikgPT0gJ1tvYmplY3QgT2JqZWN0XSdcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChiW2tleV0pID09ICdbb2JqZWN0IE9iamVjdF0nKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFba2V5XSkgIT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAgICAgICAgICBhW2tleV0gPSBiW2tleV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFba2V5XSA9IGV4dGVuZChhW2tleV0sIGJba2V5XSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhW2tleV0gPSBiW2tleV07XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGE7XG5cbn07IiwidmFyIGV4dGVuZCA9IHJlcXVpcmUoJ29iamVjdC1leHRlbmQnKTtcblxuY2xhc3MgYXJrbyB7XG4gICAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSBleHRlbmQoe1xuICAgICAgICAgICAgc2VsZWN0b3JzOiBbXG4gICAgICAgICAgICAgICAgJ2VtYmVkJyxcbiAgICAgICAgICAgICAgICAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICAnaWZyYW1lJ1xuICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIGNsYXNzTmFtZXM6IHtcbiAgICAgICAgICAgICAgICBhY3RpdmU6ICdpcy1yZXNwb25zaXZlJyxcbiAgICAgICAgICAgICAgICBjb250YWluZXI6ICdlbWJlZC1jb250YWluZXInXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMuZG9jUmVhZHkodGhpcy5maW5kLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIGRvY1JlYWR5KGNhbGxiYWNrKSB7XG4gICAgICAgIGZ1bmN0aW9uIGNvbXBsZXRlZCgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGNvbXBsZXRlZCwgZmFsc2UpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsIGNvbXBsZXRlZCwgZmFsc2UpO1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoY2FsbGJhY2spO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkLCBmYWxzZSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgY29tcGxldGVkLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmaW5kKCkge1xuICAgICAgICAvLyBHZXQgZW1iZWRzXG4gICAgICAgIHZhciBlbWJlZHMgPSBbXTtcbiAgICAgICAgdGhpcy5vcHRpb25zLnNlbGVjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgICAgICAgZW1iZWRzID0gZW1iZWRzLmNvbmNhdChbXS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpKSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldCBhc3BlY3QgcmF0aW9cbiAgICAgICAgZW1iZWRzLmZvckVhY2goZnVuY3Rpb24gKGVtYmVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5pc1Jlc3BvbnNpdmUoZW1iZWQpKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBwb3MgPSBlbWJlZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAgICAgLy8gQ3JlYXRlIGNvbnRhaW5lciwgYXBwZW5kIGVtYmVkXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBjb250YWluZXIuY2xhc3NOYW1lID0gdGhpcy5vcHRpb25zLmNsYXNzTmFtZXMuY29udGFpbmVyO1xuICAgICAgICAgICAgY29udGFpbmVyLnN0eWxlLnBhZGRpbmdCb3R0b20gPSAoMTAwICogcG9zLmhlaWdodCAvIHBvcy53aWR0aCkgKyAnJSc7XG4gICAgICAgICAgICBlbWJlZC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShjb250YWluZXIsIGVtYmVkKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbWJlZCk7XG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKHRoaXMub3B0aW9ucy5jbGFzc05hbWVzLmFjdGl2ZSk7XG4gICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgaXNSZXNwb25zaXZlKGVtYmVkKSB7XG4gICAgICAgIHJldHVybiBlbWJlZC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucyh0aGlzLm9wdGlvbnMuY2xhc3NOYW1lcy5hY3RpdmUpIHx8IHRoaXMuZXhjbHVkZShlbWJlZCk7XG4gICAgfVxuXG4gICAgc3RhdGljIGV4Y2x1ZGUoZW1iZWQpIHtcbiAgICAgICAgcmV0dXJuIGVtYmVkLmNsYXNzTGlzdC5jb250YWlucygnaW5zdGFncmFtLW1lZGlhJyk7XG4gICAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGV4cG9ydHMgPSBhcmtvOyJdfQ==\n"],"sourceRoot":"/source/"}